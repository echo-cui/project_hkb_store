function initBannerTouch(e){function t(e){for(;-1!=this.className.indexOf("move");)this.className=this.className.replace("move","");v=1,B=1,d=!0,N=0,y=[0,0]}function n(e){if(1!=e.touches.length||1!=N&&0!=N||!this.getAttribute("data-proportio")||1==this.getAttribute("data-proportio")){if(2==e.touches.length&&(2==N||0==N)){N=2;var t=[e.touches[0].pageX,e.touches[1].pageX],n=[e.touches[0].pageY,e.touches[1].pageY];E=[(t[0]+t[1])/2,(n[0]+n[1])/2],g=Math.sqrt(Math.pow(t[0]-t[1],2),Math.pow(n[0]-n[1],2)),d&&g>0&&(d=!1,h=g,f=E,this.getAttribute("data-proportio")&&(v=this.getAttribute("data-proportio"),y[0]=parseInt(this.getAttribute("data-left")),y[1]=parseInt(this.getAttribute("data-top")))),B=(h+(g-h)/3*2)/h*v,B=function(e){return browser.os.iOS?(e<1?e=1-(1-e)/2:e>3.5?e=2.833:e>2.5&&(e=2.5+(e-2.5)/3),e):s(e)}(B),this.setAttribute("data-proportio",B),p=[(E[0]-f[0])/B+y[0],(E[1]-f[1])/B+y[1]],l(this,B,p[0],p[1]),e.preventDefault(),e.stopPropagation()}}else N=1,E=[e.touches[0].pageX,e.touches[0].pageY],d&&(d=!1,f=E,this.getAttribute("data-proportio")&&(B=v=this.getAttribute("data-proportio"),y[0]=parseInt(this.getAttribute("data-left")),y[1]=parseInt(this.getAttribute("data-top")))),p=[(E[0]-f[0])/B+y[0],(E[1]-f[1])/B+y[1]],l(this,B,p[0],p[1]),e.preventDefault(),e.stopPropagation()}function a(e){var t=this;B=s(B),p[0]=o(p[0],t),p[1]=i(p[1],t),function(e,n,a,s){l(e,n,a,s),t.setAttribute("data-proportio",n),t.setAttribute("data-left",a),t.setAttribute("data-top",s),t.className+=" move"}(t,B,p[0],p[1])}function s(e){return e<1?1:e>2.5?2.5:e}function o(e,t){var n=document.documentElement.clientWidth,a=t.clientWidth*s(B);if(n>=a)return 0;var o=t.getBoundingClientRect().left;return o>0?(o>n/3&&r(),(a-n)/2/B):n-(a+o)>0?(n-(a+o)>n/3&&c(),-(a-n)/2/B):e}function i(e,t){var n=document.documentElement.clientHeight,a=t.clientHeight*s(B);if(n>=a)return 0;var o=t.getBoundingClientRect().top;return o>0?(a-n)/2/B:n-(a+o)>0?-(a-n)/2/B:e}function l(e,t,n,a){var s="scale3d("+t+","+t+",1) translate3d("+n+"px, "+a+"px , 0)";e.style.transform=s,e.style.webkitTransform=s}for(var r=e.leftFn,c=e.rightFn,m=document.getElementsByClassName("jd_banner_touch"),u=0;u<m.length;u++)m[u].addEventListener("touchstart",t,!1),m[u].addEventListener("touchmove",n,!1),m[u].addEventListener("touchend",a,!1);var d=!0,h=0,g=0,v=1,E=[0,0],f=[0,0],p=[0,0],y=[0,0],N=0,B=1}var browser={os:function(){var e=navigator.userAgent;return{linux:!!e.match(/\(X11;( U;)? Linux/i),windows:!!e.match(/Windows/i),android:!!e.match(/Android/i),iOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}}(),device:function(){var e=navigator.userAgent;return{mobile:!!e.match(/AppleWebKit/i),iPhone:!!e.match(/iPhone/i),iPad:!!e.match(/iPad/i)}}(),supplier:function(){var e=navigator.userAgent;return{qq:!!e.match(/QQ\/\d+/i),wechat:!!e.match(/MicroMessenger/i),weixin:"MicroMessenger"==e.match(/MicroMessenger/i),ios:e.indexOf("_JFiOS")>-1,android:e.indexOf("_jfAndroid")>-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),androidVersion:function(){var e=navigator.userAgent,t=e.indexOf("Android");if(t>=0)return parseFloat(e.slice(t+8))}(),IosVersion:function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/cpu iphone os (.*?) like mac os/);return t?t[1].replace(/_/g,"."):-1}()},windowBanEvent={bundling:function(){for(var e=this,t=["click","touchstart","touchmove","touchend"],n=0;n<t.length;n++)document.body.addEventListener(t[n],e.Canceling,!1),addEventListener(t[n],e.Canceling,!1)},unbundling:function(){for(var e=this,t=["click","touchstart","touchmove","touchend"],n=0;n<t.length;n++)document.body.removeEventListener(t[n],e.Canceling,!1),removeEventListener(t[n],e.Canceling,!1)},Canceling:function(e){var e=e||window.event;e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)}},hkbProductDetails={volumeChange:function(e){function t(){var e=this.parentNode.getElementsByClassName("volume_input")[0],t=parseInt(e.value);this.className.indexOf("reduce")>-1?e.value=n(t-1):e.value=n(t+1)}function n(e){return e<=1||!e?1:e}function a(){window.scrollTo(0,i),s()}function s(){this.value=n(this.value)}function o(){i=document.body.scrollTop,setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)},300)}for(var i,l=document.getElementsByClassName("volume_btn"),r=0;r<l.length;r++)if(l[r].getElementsByClassName("reduce")[0].addEventListener("touchstart",t,!1),l[r].getElementsByClassName("add")[0].addEventListener("touchstart",t,!1),l[r].getElementsByClassName("volume_input")[0].addEventListener("blur",s,!1),browser.os.iOS&&e){var c=l[r].getElementsByClassName("volume_input")[0];c.addEventListener("focus",o,!1),c.addEventListener("blur",a,!1)}}},jfProductDetails={clickTabChange:function(e,t,n){for(var a=e.getElementsByClassName(n),s=0;s<a.length;s++)a[s].addEventListener("click",function(){e.getElementsByClassName(t)[0].className=e.getElementsByClassName(t)[0].className.replace(t,""),this.className+=" "+t},!1)},tabScrollChange:function(){window.addEventListener("scroll",function(){function e(e,t,n){e.getElementsByClassName("choose_tab")[0]&&(e.getElementsByClassName("choose_tab")[0].className=e.getElementsByClassName("choose_tab")[0].className.replace("choose_tab","")),e.getElementsByClassName(t)[n].className+=" choose_tab"}var t=document.getElementById("NavTab"),n=document.getElementsByClassName("product_nav_contain")[0],a=t.offsetHeight+n.offsetHeight,s=document.getElementsByClassName("product_images_parameter")[0],o=document.getElementsByClassName("product_images_service")[0],i=document.getElementsByClassName("product_images")[0];i.getBoundingClientRect().top>t.offsetHeight?e(document.getElementsByClassName("content")[0],"nav_tab",0):i.getBoundingClientRect().top<=t.offsetHeight&&(e(document.getElementsByClassName("content")[0],"nav_tab",1),function(){o.getBoundingClientRect().top-a<=0?e(document.getElementById("NavTab"),"tab",2):s.getBoundingClientRect().top-a<=0?e(document.getElementById("NavTab"),"tab",1):e(document.getElementById("NavTab"),"tab",0)}())})}},productInfoPlay={figer:{ischange:!0,ismove:!0},init:function(e){var t=this;if(e||(e={}),t.moveEle=e.moveEle||"allimg",t.moveEleParent=e.moveEleParent||"demo1",t.scaleEleParent=e.scaleEleParent||"jdshow_center_center",t.allShowEle=e.allShowEle||!1,t.fn=e.fn||0,t.thisPosition=0,t.moveDistanceX=0,t.moveDistanceY=0,setTimeout(function(){t.initPointEle(t.moveEleParent)},100),t.moveEvent(),t.allShowEle){document.getElementsByClassName(t.allShowEle)[0].getElementsByClassName(t.moveEle)[0].innerHTML=document.getElementsByClassName(t.moveEle)[0].innerHTML,document.getElementsByClassName("img_content")[0].addEventListener("touchmove",function(e){e.preventDefault()},!1);for(var n=document.getElementsByClassName(t.moveEle)[0].getElementsByClassName(t.scaleEleParent),a=0;a<n.length;a++)n[a].getElementsByTagName("div")[0].className="";document.getElementsByClassName("delete_banner")[0].addEventListener("click",function(){for(var e=document.getElementsByClassName("jd_banner_touch"),n=0;n<e.length;n++)e[n].style.transform="scale3d(1,1,1) translate3d(0,0,0)";document.getElementsByClassName(t.allShowEle)[0].style.display="none",document.getElementsByTagName("body")[0].style.overflow="",document.getElementsByTagName("html")[0].style.overflow="",document.getElementsByTagName("body")[0].style.height="100%",document.getElementsByTagName("html")[0].style.height="100%"},!1),initBannerTouch({leftFn:function(){},rightFn:function(e){}})}},moveEvent:function(){function e(e){var t=e||window.event;a=parseFloat(t.touches[0].clientX),s=parseFloat(t.touches[0].clientY),u=d=a}function t(e){var t=e||window.event;return o=parseFloat(t.changedTouches[0].clientX),i=parseFloat(t.changedTouches[0].clientY),u=d,d=o,l.moveDistanceX=o-a,l.moveDistanceY=i-s,Math.abs(d-u)}function n(){for(var e=0;e<r.length;e++)r[e].className=""+l.moveEle,r[e].removeEventListener("transitionend",n,!1),r[e].removeEventListener("transitionend",n,!1)}var a,s,o,i,l=this,r=document.getElementsByClassName(l.moveEle),c=r[0].getElementsByClassName(l.scaleEleParent).length-1,m=window.innerWidth,u=0,d=0,h=0;r[0].addEventListener("touchstart",function(t){1==(t||window.event).touches.length&&(l.moveDistanceX=0,l.moveDistanceY=0,l.figer.ischange=!0,e(t),(this.className=l.moveEle+" contentchange")&&(this.className=""+l.moveEle))},!1),r[0].addEventListener("touchmove",function(e){var n=e||window.event;1==n.touches.length&&(h=t(e),l.figer.ischange&&(Math.abs(l.moveDistanceY)>Math.abs(l.moveDistanceX)?l.figer.ismove=!1:l.figer.ismove=!0,l.figer.ischange=!1),l.figer.ismove&&(n.preventDefault(),n.stopPropagation(),(0==l.thisPosition&&l.moveDistanceX>0||l.thisPosition==-c&&l.moveDistanceX<0)&&(l.moveDistanceX=l.moveDistanceX/3),l.changeTranslate(parseFloat(l.thisPosition*m)+parseFloat(l.moveDistanceX)+"px")))},!1),r[0].addEventListener("touchend",function(e){1==(e||window.event).changedTouches.length&&l.figer.ismove&&(this.className=l.moveEle+" contentchange",this.parentElement==document.getElementsByClassName(l.moveEleParent)[0]&&l.thisPosition==-c&&l.moveDistanceX<0&&Math.abs(l.moveDistanceX)>55&&l.fn&&l.fn(),Math.abs(l.moveDistanceX)>m/3||h>6?l.movePosition(l.moveDistanceX):l.changeTranslate(parseFloat(l.thisPosition*m)+"px"),l.transitionFn(n))},!1),r[0].addEventListener("click",function(){l.showNewBanner()},!1)},movePosition:function(e){var t=this,n=window.innerWidth,a=document.getElementsByClassName(t.moveEle),s=a[0].getElementsByClassName(t.scaleEleParent).length-1,o=document.getElementsByClassName("allpoint"),i=o[0].getElementsByTagName("span"),l=o[o.length-1].getElementsByTagName("span");if(parseFloat(e)<0?t.thisPosition>-s?t.thisPosition--:t.thisPosition=-s:parseFloat(e)>0&&(t.thisPosition<0?t.thisPosition++:t.thisPosition=0),t.changeTranslate(n*this.thisPosition+"px"),i){for(var r=0;r<o.length;r++)o[r].getElementsByClassName("showpoint")[0].className="";i[-this.thisPosition].className="showpoint",l[-this.thisPosition].className="showpoint"}},initPointEle:function(e){for(var t=this,n=document.getElementsByClassName(t.moveEle)[0].getElementsByClassName(t.scaleEleParent),a="",s=0;s<n.length;s++)a+=0==s?'<span class="showpoint"></span>':"<span></span>";!function(t,n,a){var s=document.createElement(t);a&&(s.className=a),s.innerHTML=n,document.getElementsByClassName(e)[0].appendChild(s)}("div",a,"allpoint")},changeTranslate:function(e){for(var t=this,n=document.getElementsByClassName(t.moveEle),a=0;a<n.length;a++)n[a].style.transform="translateX("+e+")",n[a].style.webkitTransform="translateX("+e+")"},transitionFn:function(e){for(var t=this,n=document.getElementsByClassName(t.moveEle),a=0;a<n.length;a++)n[a].addEventListener("TransitionEnd",e,!1),n[a].addEventListener("webkitTransitionEnd",e,!1)},showNewBanner:function(){var e=this,t=window.innerHeight;0==e.moveDistanceX&&0==e.moveDistanceY&&e.allShowEle&&(document.getElementsByClassName(e.allShowEle)[0].style.display="block",document.getElementsByTagName("body")[0].style.height=t+"px",document.getElementsByTagName("html")[0].style.height=t+"px",document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementsByTagName("html")[0].style.overflow="hidden")}};